% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_compile_models.R
\name{ensure_stan_models_compiled}
\alias{ensure_stan_models_compiled}
\title{Ensure all Stan models are compiled}
\usage{
ensure_stan_models_compiled(stan_dir = NULL, force = FALSE, verbose = TRUE)
}
\arguments{
\item{stan_dir}{Character path to the directory containing \code{.stan}
files. Defaults to the installed package's \code{stan/} directory.
When developing locally (i.e. the package is not installed), you can
pass \code{"inst/stan"} explicitly.}

\item{force}{Logical. If \code{TRUE}, recompile all models even if compiled
versions already exist. Defaults to \code{FALSE}.}

\item{verbose}{Logical. If \code{TRUE}, print status messages to the
console. Defaults to \code{TRUE}.}
}
\value{
A named logical vector indicating compilation status for each model.
  Names are model identifiers (e.g. \code{"NTT"}, \code{"NNN"}).
  Values are \code{TRUE} if the compiled \code{.rds} is now available
  (either pre-existing or freshly compiled), \code{FALSE} if compilation
  failed.
}
\description{
Scans the package's \code{inst/stan} directory for \code{.stan} files with
the naming convention \code{stan_model_<NAME>.stan}. For each, it checks
whether a corresponding compiled \code{stan_model_<NAME>_compiled.rds} file
exists. Any missing compiled models are compiled via
\code{rstan::stan_model()} and saved as \code{.rds} files.
}
\details{
The function is designed to be called in two contexts:
\enumerate{
  \item \strong{At app startup} (inside \code{app_core.R}): automatically
    compiles any missing models so the user never hits a "missing model"
    error.
  \item \strong{Interactively by a developer}: e.g.
    \code{ensure_stan_models_compiled("inst/stan", force = TRUE)} to
    rebuild all compiled models after editing \code{.stan} source files.
}

Models are detected by the glob pattern \code{stan_model_*.stan}, excluding
any file whose name already contains \code{_compiled}. The model name is
extracted from the filename
(e.g. \code{stan_model_NTT.stan} -> \code{"NTT"}).
}
\examples{
\dontrun{
# At startup (uses installed package path):
ensure_stan_models_compiled()

# During development (force recompile):
ensure_stan_models_compiled("inst/stan", force = TRUE)
}

}
